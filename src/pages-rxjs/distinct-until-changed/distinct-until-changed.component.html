<div class="page-header">
  <h1 class="title">DistinctUntilChanged</h1>
  <a class="link-rxjs" href="https://rxjs.dev/api/operators/distinctUntilChanged" target="_blank" rel="noopener">rxjs
    distinctUntilChanged â¡ï¸</a>
</div>

<p>
  Este operador evita que se emitan dos eventos iguales seguidos.
</p>

<textarea highlight-js [lang]="'typescript'">
import { distinctUntilChanged, Observable } from 'rxjs';

new Observable((suscriptor) => {
  setTimeout(() => suscriptor.next('ğŸ'), 100);
  setTimeout(() => suscriptor.next('ğŸŒ'), 200);
  setTimeout(() => suscriptor.next('ğŸŒ'), 300);
  setTimeout(() => suscriptor.next('ğŸ‡'), 400);
  setTimeout(() => suscriptor.next('ğŸ‹'), 500);
  setTimeout(() => suscriptor.next('ğŸ‹'), 600);
})
  .pipe(distinctUntilChanged())
  .subscribe({
    next: (value) => console.log(`The next value is: ${value}`),
    error: (error) => console.error(`There is an error: ${error}`),
    complete: () => console.log('Completed'),
  });

// Output
// The next value is: ğŸ
// The next value is: ğŸŒ
// The next value is: ğŸ‡
// The next value is: ğŸ‹
</textarea>

<p>
  Bueno, vamos a explicar que ha pasado. Primero se emite la ğŸ. Como no se habÃ­a emitido nada antes, el operador no
  tiene con que comparar, asÃ­ que lo deja pasar al suscriptor. Luego se emite un ğŸŒ. Como es diferente a la ğŸ, se
  emite tambiÃ©n al suscriptor. Luego se emite otro ğŸŒ. Esta vez se filtra, pues es igual que el que se habÃ­a emitido
  por Ãºltima vez. DespuÃ©s se emiten unas ğŸ‡. Esto no es lo mismo que un ğŸŒ, asÃ­ que se emite tambiÃ©n al suscriptor.
  Luego se emite un ğŸ‹. Como es diferente a las ğŸ‡ se emite tambiÃ©n. Por Ãºltimo se emite otro ğŸ‹. Como lo de antes era
  tambiÃ©n un ğŸ‹, no se deja pasar al suscriptor.
</p>

<p>PruÃ©balo en esta demo:</p>

<svg appDemoContainer viewBox="0 0 640 240">
  <g transform="translate(30, 80)" appConveyorController [button1]="controllerButtons[MAIN_ID][0]"
    [button2]="controllerButtons[MAIN_ID][1]" [button3]="controllerButtons[MAIN_ID][2]"
    [button4]="controllerButtons[MAIN_ID][3]" [button5]="controllerButtons[MAIN_ID][4]"
    (onButtonClick)="onControllerButtonClick($event)">
  </g>

  <g transform="translate(220, 80)" appConveyorHorizontal [conveyorWorking$]="conveyorsWorking[MAIN_ID]"
    [length]="250.8">
  </g>

  <g appOperator transform="translate(295, 45)"></g>

  <g>
    <text x="320" y="106" font-size="0.5em">{{lastEmittedElement}}</text>
    <text x="340" y="106" font-size="0.5em" *ngIf="checkCrossIndicator != ''">{{checkCrossIndicator}}</text>
  </g>

  <g transform="translate(496, 20)" appSubscriber [showSpeechBubble$]="speechBubble$"
    (onSubscribe$)="onSubscribe($event)">
  </g>

  <g>
    <text *ngFor="let element of elementsInConveyor" [attr.x]="element.x" y="136">{{element.value}}</text>
  </g>
</svg>